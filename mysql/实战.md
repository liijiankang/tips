**https://www.bilibili.com/video/BV1et411R7LL?from=search&seid=10458512550999062996**

```sql
    select
        a.data_str,
        a.shopCode,
        a.add_car_pv,
        (
            select 
                b.shop_type
            from 
                db_shop b
            where 
                a.shopCode=b.shop_code
        ) shopCode
    from 
        db_car_copy a
    order by
        a.shopCode,
        a.add_car_pv,
        a.date_str
```

# 优化
* 服务器硬件
* MySQL服务器优化
* sql优化

    ```
    //关联子查询效率不如关联查询，讲子查询改成关联查询
    select
        a.data_str,
        a.shopCode,
        a.add_car_pv,
        b.shop_type
    from 
        db_car_copy a，db_shop b
    where 
        a.shopCode=b.shop_code
    order by
        a.shopCode,
        a.add_car_pv,
        a.date_str
    ```    
* 反范式设计优化

    ```
    三大范式：
        减少冗余，让表更容易维护
    反范式：
        为了性能，适当的增加冗余，空间换时间
    ```
* 物理设计优化（字段、长度、存储引擎）
* 索引优化
    ```
        聚簇索引：数据和索引在一起
        非聚簇索引：数据和索引不在一起
    ```
# 执行计划
**explain + SQL**

> 执行计划的作用
> * 表的读取顺序
> * 数据读取操作的操作类型
> * 哪些索引可以使用
> * 哪些索引被实际使用
> * 表之间的引用
> * 每张表有多少行被优化器查询

