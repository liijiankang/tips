# 当集群规模大于100个节点时，需要对ambari进行优化
___
## ambari-server
**1.增加heap size**
节点个数|Xmx| Xmn
-|:-:|:-:|
100 - 400|4 GB|2 GB|
400 - 800|4 GB|2 GB|
800 - 1200|8 GB|2 GB|
1200 - 1600|16 GB|2.4 GB|
**2.增加cache size**

`server.ecCacheSize=60*节点个数`

**3.集群运行较长一段时间后清除不需要的元数据**
* 停止server

    `ambari-server stop`
* 清除2017-08-01之前的数据

    `ambari-server db-purge-history --cluster-name [PROD] --from-date
 2017-08-01`
* 启动server

    ` ambari-server start`

## ambari-agent调优
**集群节点大于1500时，需要对agent进行优化**
```
    Set command_update_output=0
    Set send_alert_changes_only=1
```
## MySQL调优
```
    insight4.6.1中MySQL以满足要求，不需要额外配置
```